from flask import Flask, render_template, request, jsonify
from flask_cors import CORS

app = Flask(__name__)
CORS(app)  # Permitir CORS para desenvolvimento

# Dados temporários (substituir por banco de dados em produção)
users = []

@app.route('/')
def index():
    return render_template('index.html')

@app.route('/login', methods=['POST'])
def login():
    data = request.get_json()
    
    # Verificar se usuário existe (simulação)
    user = next((u for u in users if u['email'] == data['email'] and u['senha'] == data['senha']), None)
    
    if user:
        return jsonify({'message': 'Login bem-sucedido'}), 200
    else:
        return jsonify({'message': 'Credenciais inválidas'}), 401

@app.route('/recovery', methods=['POST'])
def recovery():
    data = request.get_json()
    email = data['email']
    
    # Simular envio de e-mail
    print(f"Link de recuperação enviado para: {email}")
    
    return jsonify({'message': 'Se o e-mail existir, enviaremos um link de recuperação'}), 200

if __name__ == '__main__':
    app.run(debug=True)